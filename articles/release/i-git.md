# [ i ] Git - Быстрый старт

Git — распределённая система управления версиями. Проект был создан Линусом Торвальдсом для управления разработкой ядра Linux, первая версия выпущена 7 апреля 2005 года. ВИКИПЕДИЯ

 

## 1. Инициализация версионного контроля Git

Для инициализации системы контроля версий перейдите в корневой каталог вашего проекта.

Затем выполните следующую команду:

> $ git init

После выполнения команды будет создана папка репозитория .git ослеживающая изменения в исходном коде проекта.

Если существует необходимость в исключении файлов или папок из под версионного контроля, то в корневой папке проекта необходимо создать .gitignore файл с их перечислением.

Пример содержания .gitignore файла:

> __pycache__/
> *.py[cod]
> /env
> *.log
> .env
> .idea
> .DS_Store

 

## 2. Добавление файлов

Добавление всех файлов и папок под версионный контроль, за исключением указаных в .gitignore, выполняется следующей командой:

> $ git add .

Для добавления отдельных файлов или папок можно выполнить команду git add через перечисление этих файлов и папок:

> $ git add файл1 папка1 папка2/файл2 

 

## 3. Commit (подтверждение) изменений

Вы можете посмотреть не подтвержденные изменения командой git status.

> $ git status

Которая в свою очередь выведет состояние проекта, пример:

> On branch master
> 
> No commits yet
> 
> Changes to be committed:
>  (use "git rm --cached <file>..." to unstage)
>	new file:   test.txt
>
> Untracked files:
>  (use "git add <file>..." to include in what will be committed)
>	test2.txt
>	test3.txt

Для подтверждения внесенный изменений или при первом подтверждении (commit'е) нужно выполнить команду:

> $ git commit -m 'Initial commit'

Где после -m в скобочках указывается сообщение подтверждения изменений. Это напоминание разработчикам в человеческой форме какие были сделаны изменения, в нашем случае мы зафисировали первый коммит нашего проекта, после добавления файлов. Пример выполения команды приведен ниже:

> [master (root-commit) f3921f9] Initial commit
> 1 file changed, 0 insertions(+), 0 deletions(-)
> create mode 100644 test.txt

Если вызвать git commit без аргументов, тогда откроется редактор по умолчанию для внесения пояснений к коммиту, после его закрытия произойдет применение изменений.

## 4. Удаление файлов из Git

Для удаления файлов и папок из под версионного контроля необходимо выполнить команду:

> $ git rm имя_файла

После чего будет выполнено физическое удаление файла из проекта и Git, для удаления файла только из под версионного контроля выполним команду:

> $ git rm --cashed имя_файла

Параметры передаваемые с git rm:

> -r - рекурсивное удаление содержимого указаного каталога.
>
> -f или --force - применяется для отключения проверки безопасности, с помощью которой Git обеспечивает соответствие файлов в указателе HEAD текущему содержимому раздела проиндексированных файлов и рабочего каталога.
>
> -n или --dry-run -dry run является защитным механизмом. Он позволяет выполнить пробный запуск команды git rm без удаления файлов. В выходных данных отображаются файлы, которые должны были быть удалены
>
> --q или --quiet скрывает вывод команды git rm.

 
## 5. Откат изменений команды git rm

### 5.1. Откат изменения можно сделать если изменения не были закомитены, для этого нужно выполнить следующую команду:

> $ git reset HEAD

git reset восстановит раздел индексированных файлов и рабочий каталог до коммита HEAD. В результате изменения, внесенные командой git rm, будут отменены.

> $ git checkout .

Команда git checkout также восстановит последнюю версию файла из указателя HEAD.

5.2. Для востановления удаленного файла дополнительно потребуется выполнить команду git restore:

> $ git restore имя_файла

 
## 6. Просмотр произведенных изменений git diff

Команда git status показывает общую информацию об изменениях в проекте, для более подробного просмотра изменений можно использовать команду git diff отображающую изменения в коде.

Для просмотра не проиндексированных изменений выполняем простую команду:

> $ git diff

Для просмотра уже проиндексированных изменений в вызов команды добавляем --cashed или --staged:

> $ git diff --cashed
> $ git diff --staged

прим. на моем ноутбуке MacBook Air M1 данная команда работает только со --staged, у Вас может быть иной результат.

 

## 7. Просмотр коммитов

Для просмотра истории внесенных изменений в проекте, выполним следующую команду:

> $ git log

По умолчанию команда выведет ХЕШ сумму коммита с именем и электронной почтой автора, датой создания и сообщением коммита.

Используя дополнительные аргументы можно гибко управлять выводом информации о коммитах. Ниже приводятся самые на мой взгляд полезные аргументы команды git log:

> -p или --patch - в результате показывается разница внесенных изменений в каждый коммит. Для ограничения количества записей в выводе команды можно использовать параметр -3, где 3 количество выводимых коммитов.
>
> $ git log --patch -3
>
> --stat - аргумент выводит обобщенную статистику
> 
> --pretty - измен формат вывода лога. Для вас доступны несколько предустановленных вариантов, с которыми вы сможете ознакомиться в справке по команде.
> Например, параметр oneline выводит каждый коммит в одну строку, что удобно если вы просматриваете большое количество коммитов. В дополнение к этому, параметры short, full, и fuller, практически не меняя формат вывода, позволяют выводить меньше или больше деталей соответственно
> 
> --pretty=oneline

## 8. Клонирование репозитория

Для разветывания проекта с удаленного репозитория нужно выполнить следующую команду:

$git clone <ссылка на репозиторий>/<название папки>

## 9. Для получения изменений из удаленного репозитория нужно выполнить команду git pull

> $ git pull

Сначала команда git pull запускает команду git fetch для загрузки содержимого из указанного удаленного репозитория. Затем выполняется команда git merge, объединяющая ссылки и указатели удаленного содержимого в новый локальный коммит слияния

## 10. Публикация внесенных изменений в проект - git push

Команда git push чаще всего используется для публикации выгружаемых локальных изменений в центральном репозитории. Для того чтобы поделиться изменениями, внесенными в локальный репозиторий, с удаленными участниками команды, необходимо выполнить команду push.

> $ git push <remote> <branch>

Для выгрузки локального репозитория в главную ветку на внешний репозиторий можно использовать команду:
> $ git push origin main 

## 11. Добавление GPG токена для работы с удаленным репозиторием на GitHub:

> $ git remote set-url origin https://TOKEN@github.com/USER_NAME/REPO_NAME.git

 

P.S.

Необходимо допустить оговорку, данная статья не является полным руководством по Git и не учитывает все особенности работы с ним, цель статьи объяснить основные шаги при работе с Git и пользоваться ей как шпаргалкой, для уточнения информации по Git можно обратиться к официальной документации. Хороший ресурс по гиту https://www.atlassian.com/ru/git.
UPD20211102: добавлены разделы 8-11.
